Сначала на своем ноутбуке скачал vault
![image](screens/1.png)
Дальше я запустил Vault в dev-режиме
![image](screens/2.png)
Дальше я экспортировал переменные среды для CLI:
![image](screens/3.png)

Дальше я настроил секрет Vault
![image](screens/4.png)


Дальше я начал устанавливать токен Vault в GitHub Secrets и понял, что в чужом репозитории у меня нет прав заходить в настройки. Поэтому данная лаба выполнена в другом репозитории.
В своем уже репозитории я зашел в настройки и добавил токен

![image](screens/5.png)

Теперь я создал в папке workflows файл vault-integration.yml

![image](screens/6.png)

Зашел в Actions и понял, что Vault я настраивал локально, а Github Actions запускает workflow в своей облачной инфраструктуре...

![image](screens/7.png)

Я нашел решение этой проблемы с помощью запуска Vault с помощью docker в Github Actions

Первым делом я переписал vault-integration.yml

![image](screens/8.png)

Новый конфиг создает временный Vault сервер в контейнере прямо в процессе выполнения workflow. Все действия с секретами происходят локально для CI/CD.

Но в нем была обнаружена ошибка, использовалась версия vault latest, а не какая-то конкретная, в новом конфиге указана конкретная версия 1.15.4
![image](screens/9.png)

Это все еще не помогло, оказывается надо зарегистрироваться в Docker Hub...

Зарегистрировался и добавил новый секрет, и строчки в yml.
![image](screens/10.png)

Ошибка осталась, возможно в Docker Hub нет этой версии vault, и, действительно, версии после 14 не поддерживаются, поэтому поменял версию на 1.13.3

Теперь появилась проблема с пунктом Log in to Docker Hub

![image](screens/11.png)


Тут я хотел вставить как я пытаюсь исправить ошибку, но я исправлял ее кучу раз и ничего не работало, а в итоге как оказалось я неправильно понял что такое секреты и не то писал в название и секрет.....
Теперь есть два секрета, и с докер хабом все работает

![image](screens/12.png)
![image](screens/13.png)

Но как можно увидеть появилась новая проблема(

Дальше было пару часов страданий в попытках понять, что не работает, но я так и не смог.

Поэтому было принято мужское решение, сделать все через свой ноутбук и ngrok.

Я создал секрет с API_KEY и DB_PASSWORD
Потом я скачал ngrok и запустил его на порте 8200

![image](screens/1001.png)

Проверил работает ли все, с помощью команды curl, как можем увидеть там странный адрес secret/data/data/myapp, это тоже вызвало проблемы, на скрине ngrok видно, что были запросы Not Found, потому что там только одно слово data, я так и не понял почему их два, но работает и работает.)

![image](screens/1002.png)

Теперь я поменял секреты в репозитории, а также написал новый yml, в котором надо достать API_KEY И DB_PASSWORD из секретов. 

![image](screens/1003.png)

И наконец-то зайдя в Actions я увидел заветные галочки на всех пунктах.

![image](screens/1004.png)
